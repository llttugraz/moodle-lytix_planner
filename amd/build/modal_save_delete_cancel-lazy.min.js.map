{"version":3,"file":"modal_save_delete_cancel-lazy.min.js","sources":["../src/modal_save_delete_cancel-lazy.js"],"sourcesContent":["import $ from 'jquery';\nimport Notification from 'core/notification';\nimport * as CustomEvents from 'core/custom_interaction_events';\nimport Modal from 'core/modal';\nimport ModalRegistry from 'core/modal_registry';\n\nconst SELECTORS = {\n    SAVE_BUTTON: '[data-action=\"save\"]',\n    CANCEL_BUTTON: '[data-action=\"cancel\"]',\n    DELETE_BUTTON: '[data-action=\"delete\"]',\n};\n\nlet r;\nif (Number(M.cfg.version) < 2024042200) {\n    // Moodle < 4.4 .\n    var registered = false;\n    /**\n     * Constructor for the Modal.\n     *\n     * @param {object} root The root jQuery element for the modal\n     */\n    var ModalType = function(root) {\n        Modal.call(this, root);\n\n        if (!this.getFooter().find(SELECTORS.SAVE_BUTTON).length) {\n            Notification.exception({message: 'No save button found'});\n        }\n\n        if (!this.getFooter().find(SELECTORS.DELETE_BUTTON).length) {\n            Notification.exception({message: 'No delete button found'});\n        }\n\n        if (!this.getFooter().find(SELECTORS.CANCEL_BUTTON).length) {\n            Notification.exception({message: 'No cancel button found'});\n        }\n    };\n    ModalType.TYPE = 'lytix_planner-modal_save_delete_cancel';\n    ModalType.TEMPLATE = 'lytix_planner/modal_save_delete_cancel';\n    ModalType.prototype = Object.create(Modal.prototype);\n    ModalType.prototype.constructor = ModalType;\n\n    /**\n     * Set up all of the event handling for the modal.\n     *\n     * @method registerEventListeners\n     */\n    ModalType.prototype.registerEventListeners = function() {\n        // Apply parent event listeners.\n        Modal.prototype.registerEventListeners.call(this);\n\n        this.registerCloseOnSave();\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.DELETE_BUTTON, function(e, data) {\n            var deleteEvent = $.Event('modal-save-delete-cancel:delete');\n            this.getRoot().trigger(deleteEvent, this);\n\n            if (!deleteEvent.isDefaultPrevented()) {\n                data.originalEvent.preventDefault();\n\n                if (this.removeOnClose) {\n                    this.destroy();\n                } else {\n                    this.hide();\n                }\n            }\n        }.bind(this));\n\n        this.registerCloseOnCancel();\n    };\n// Automatically register with the modal registry the first time this module is imported\n// so that you can create modals of this type using the modal factory.\n    if (!registered) {\n        ModalRegistry.register(ModalType.TYPE, ModalType, ModalType.TEMPLATE);\n        registered = true;\n    }\n\n    r = ModalType.TYPE;\n} else {\n    // Moodle >= 4.4 .\n    r = class ModalType extends Modal {\n        static TYPE = 'lytix_planner-modal_save_delete_cancel';\n        static TEMPLATE = 'lytix_planner/modal_save_delete_cancel';\n\n        /**\n         * Constructor for the Modal.\n         *\n         * @param {object} root The root jQuery element for the modal\n         */\n        constructor(root) {\n            super(root);\n            if (!this.getFooter().find(SELECTORS.SAVE_BUTTON).length) {\n                Notification.exception({message: 'No save button found'});\n            }\n\n            if (!this.getFooter().find(SELECTORS.DELETE_BUTTON).length) {\n                Notification.exception({message: 'No delete button found'});\n            }\n\n            if (!this.getFooter().find(SELECTORS.CANCEL_BUTTON).length) {\n                Notification.exception({message: 'No cancel button found'});\n            }\n        }\n\n        /**\n         * Set up all of the event handling for the modal.\n         *\n         * @method registerEventListeners\n         */\n        registerEventListeners() {\n            // Apply parent event listeners.\n            super.registerEventListeners(this);\n\n            super.registerCloseOnSave();\n\n            this.getModal().on(CustomEvents.events.activate, SELECTORS.DELETE_BUTTON, function(e, data) {\n                var deleteEvent = $.Event('modal-save-delete-cancel:delete');\n                this.getRoot().trigger(deleteEvent, this);\n\n                if (!deleteEvent.isDefaultPrevented()) {\n                    data.originalEvent.preventDefault();\n\n                    if (this.removeOnClose) {\n                        this.destroy();\n                    } else {\n                        this.hide();\n                    }\n                }\n            }.bind(this));\n\n            super.registerCloseOnCancel();\n        }\n    };\n    r.registerModalType();\n}\nexport default r;\n"],"names":["SELECTORS","r","Number","M","cfg","version","registered","ModalType","root","call","this","getFooter","find","length","exception","message","TYPE","TEMPLATE","prototype","Object","create","Modal","constructor","registerEventListeners","registerCloseOnSave","getModal","on","CustomEvents","events","activate","e","data","deleteEvent","$","Event","getRoot","trigger","isDefaultPrevented","originalEvent","preventDefault","removeOnClose","destroy","hide","bind","registerCloseOnCancel","register","registerModalType"],"mappings":"irDAMMA,sBACW,uBADXA,wBAEa,yBAFbA,wBAGa,6BAGfC,KACAC,OAAOC,EAAEC,IAAIC,SAAW,WAAY,KAEhCC,YAAa,EAMbC,UAAY,SAASC,qBACfC,KAAKC,KAAMF,MAEZE,KAAKC,YAAYC,KAAKZ,uBAAuBa,8BACjCC,UAAU,CAACC,QAAS,yBAGhCL,KAAKC,YAAYC,KAAKZ,yBAAyBa,8BACnCC,UAAU,CAACC,QAAS,2BAGhCL,KAAKC,YAAYC,KAAKZ,yBAAyBa,8BACnCC,UAAU,CAACC,QAAS,4BAGzCR,UAAUS,KAAO,yCACjBT,UAAUU,SAAW,0CACrBV,UAAUW,UAAYC,OAAOC,OAAOC,eAAMH,YACtBI,YAAcf,UAOlCA,UAAUW,UAAUK,uBAAyB,0BAEnCL,UAAUK,uBAAuBd,KAAKC,WAEvCc,2BAEAC,WAAWC,GAAGC,aAAaC,OAAOC,SAAU7B,wBAAyB,SAAS8B,EAAGC,UAC9EC,YAAcC,gBAAEC,MAAM,wCACrBC,UAAUC,QAAQJ,YAAatB,MAE/BsB,YAAYK,uBACbN,KAAKO,cAAcC,iBAEf7B,KAAK8B,mBACAC,eAEAC,SAGfC,KAAKjC,YAEFkC,yBAIJtC,qCACauC,SAAStC,UAAUS,KAAMT,UAAWA,UAAUU,UAC5DX,YAAa,GAGjBL,EAAIM,UAAUS,SACX,mCAEC,cAAwBK,eASxBC,YAAYd,YACFA,MACDE,KAAKC,YAAYC,KAAKZ,uBAAuBa,8BACjCC,UAAU,CAACC,QAAS,yBAGhCL,KAAKC,YAAYC,KAAKZ,yBAAyBa,8BACnCC,UAAU,CAACC,QAAS,2BAGhCL,KAAKC,YAAYC,KAAKZ,yBAAyBa,8BACnCC,UAAU,CAACC,QAAS,2BASzCQ,+BAEUA,uBAAuBb,YAEvBc,2BAEDC,WAAWC,GAAGC,aAAaC,OAAOC,SAAU7B,wBAAyB,SAAS8B,EAAGC,UAC9EC,YAAcC,gBAAEC,MAAM,wCACrBC,UAAUC,QAAQJ,YAAatB,MAE/BsB,YAAYK,uBACbN,KAAKO,cAAcC,iBAEf7B,KAAK8B,mBACAC,eAEAC,SAGfC,KAAKjC,aAEDkC,iCAjDI,4EACI,0CAFtB3C,SAqDAA,EAAE6C,iCAES7C"}